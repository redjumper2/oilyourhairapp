<!DOCTYPE html>
<!--
    Title: OilYourHair - Premium Natural Hair Oils
    Description: Discover the power of nature's finest oils. Transform your hair with our premium, ethically-sourced hair care collection.-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OilYourHair - Premium Natural Hair Oils</title>
    <link rel="stylesheet" href="styles.css?v=1767511987">
    <style>
        /* All common styles moved to styles.css */
    </style>
</head>
<body>
    <div class="nav-overlay"></div>
    
    <header>
        <nav>
            <a href="#" class="logo">OilYourHair</a>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html" class="active">Home</a></li>
                <li><a href="shop.html">Products</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="reviews.html">Reviews</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <div class="auth-section">
                <!-- Login Button (shown when not authenticated) -->
                <button class="auth-login-btn" onclick="login()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>Sign In</span>
                </button>

                <!-- User Info (shown when authenticated) -->
                <div class="auth-user-info">
                    <div class="user-initials"></div>
                    <span class="user-email-display"></span>
                    <button class="auth-logout-btn" onclick="logout()" title="Log out">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                    </button>
                </div>
            </div>
                <button class="cart-toggle" onclick="toggleCart()">
                    üõí Cart
                    <span class="cart-count" id="cartCount">0</span>
                </button>
        </nav>
    </header>

    <section id="home" class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1>Nourish Your Crown - Website in progress</h1>
                <p>Discover the power of nature's finest oils. Transform your hair with our premium, ethically-sourced hair care collection.</p>
                <a href="#products" class="cta-button">Shop Now</a>
            </div>
            <div class="hero-logo">
                <img src="oilyourhairlogo.png" alt="OilYourHair Logo">
            </div>
        </div>
    </section>

    <section id="about" class="mission">
        <div class="container">
            <h2>Our Mission</h2>
            <div class="mission-statement">
                At OilYourHair, we believe every strand deserves the royal treatment. Our mission is to harness the ancient wisdom of natural oils and blend them with modern science to create transformative hair care solutions. We're committed to sustainability, ethical sourcing, and empowering you to embrace your hair's natural beauty with confidence.
            </div>
        </div>
    </section>

    <section id="products" class="products">
        <div class="container">
            <h2>Best-Selling Products</h2>
            <div class="product-grid" id="bestsellingProducts">
                <!-- Products will be loaded dynamically from API -->
            </div>
        </div>
    </section>

    <section id="reviews" class="mission">
        <div class="container">
            <h2>What Our Customers Say</h2>
            <div class="mission-statement">
                "I've been using OilYourHair products for 6 months now and the transformation is incredible! My hair has never been healthier or shinier. The Argan Gold Elixir is absolutely magical!" - Sarah M.
            </div>
        </div>
    </section>

    <footer id="contact">
        <div class="footer-content">
            <div class="footer-links">
                <a href="#privacy">Privacy Policy</a>
                <a href="#terms">Terms of Service</a>
                <a href="#shipping">Shipping Info</a>
                <a href="#returns">Returns</a>
            </div>
            <p>&copy; 2025 OilYourHair. All rights reserved. | Crafted with love for your hair's journey.</p>
        </div>
    </footer>

    <script>
        // Hamburger menu is handled by navigation.js

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(255, 255, 255, 0.98)';
                header.style.boxShadow = '0 2px 20px rgba(0,0,0,0.1)';
            } else {
                header.style.background = 'rgba(255, 255, 255, 0.95)';
                header.style.boxShadow = 'none';
            }
        });

        // Active navigation link highlighting
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-links a');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.scrollY >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });

        // Add scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.product-card, .mission-statement').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'all 0.6s ease';
            observer.observe(el);
        });

        // Add hover effects to product cards
        document.querySelectorAll('.product-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

        // Close mobile menu on window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                hamburger.classList.remove('active');
                navLinks.classList.remove('active');
                navOverlay.classList.remove('active');
                body.style.overflow = '';
            }
        });

        // Products Module API Integration - Load Bestsellers
        // Use local API in development, public API in production
        const API_BASE_URL = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
            ? 'http://localhost:9091'
            : 'https://api.oilyourhair.com';
        const DOMAIN = 'oilyourhair.com';

        // Icon mapping for different product types
        const productIcons = {
            'argan': 'üåø',
            'coconut': 'ü••',
            'jojoba': 'üå±',
            'rosemary': 'üåø',
            'castor': 'üíß',
            'blend': '‚ú®'
        };

        async function loadBestsellers() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/v1/public/${DOMAIN}/products`);
                const data = await response.json();

                // Filter for bestselling and popular products
                const bestsellers = (data.products || [])
                    .filter(p => p.attributes?.badge === 'Bestseller' || p.attributes?.badge === 'Popular')
                    .slice(0, 3); // Show top 3

                const grid = document.getElementById('bestsellingProducts');
                if (bestsellers.length === 0) {
                    grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #666;">No products available yet.</p>';
                    return;
                }

                grid.innerHTML = bestsellers.map(p => {
                    const icon = productIcons[p.attributes?.type] || '‚ú®';
                    const badge = p.attributes?.badge || '';

                    return `
                        <div class="product-card">
                            ${badge ? `<div class="bestseller">${badge.toUpperCase()}</div>` : ''}
                            <div class="product-icon">${icon}</div>
                            <h3>${p.name}</h3>
                            <p>${p.description || ''}</p>
                            <div class="price">$${p.base_price.toFixed(2)}</div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Failed to load bestsellers:', error);
                document.getElementById('bestsellingProducts').innerHTML = `
                    <p style="grid-column: 1/-1; text-align: center; color: #666;">
                        ‚ö†Ô∏è Unable to load products. Please make sure the products API is running.
                    </p>
                `;
            }
        }

        // Load bestsellers on page load
        loadBestsellers();
    </script>
    <!-- Branding System -->
    <script src="cart.js?v=1767511987"></script>
    <script src="branding.js?v=1767511987"></script>
    <!-- Promotion Banner -->
    <script src="banner.js?v=1767511987"></script>
    <!-- Auth Module Integration -->
    <script src="auth.js?v=1767511987"></script>
    <script src="navigation.js?v=1767511987"></script>
</body>
</html>